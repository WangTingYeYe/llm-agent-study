# AI国际象棋代理

♟️ 基于 AutoGen + Streamlit 构建的智能国际象棋对战系统

## 项目简介

AI国际象棋代理是一个展示多代理协作的创新项目，通过两个独立的AI代理进行自主国际象棋对战。该项目使用 Microsoft AutoGen 框架构建多代理系统，结合阿里云通义千问大模型的战略思维能力，创造了一个完全自主的智能象棋对战环境。

## 核心功能

### 🤖 双AI代理对战
- **Agent White**: 专业白棋AI代理，负责白方的所有移动决策
- **Agent Black**: 专业黑棋AI代理，负责黑方的所有移动决策
- **Game Master**: 游戏管理代理，验证移动合法性并协调对战流程

### 🧠 智能战略决策
- 基于 **阿里云通义千问** (Qwen-plus-latest) 模型
- 每个代理都具备专业的象棋分析能力
- 自动评估棋局形势并制定最优移动策略

### ⚡ 实时对战管理
- 自动轮换代理进行移动
- 实时验证每一步移动的合法性
- 智能检测游戏结束条件（将军、平局等）

### 📊 完整对局记录
- 可视化棋盘状态变化
- 完整的移动历史记录
- 每一步移动的详细说明

### 🎯 交互式界面
- 基于 **Streamlit** 的现代化 Web 界面
- 实时显示棋盘状态和移动过程
- 可自定义对局回合数

## 技术架构

### 核心技术栈
- **AutoGen**: Microsoft 多代理对话框架
- **Streamlit**: Web应用界面框架
- **Python Chess**: 国际象棋逻辑和规则引擎
- **OpenAI Compatible API**: 大语言模型接口
- **SVG渲染**: 棋盘可视化

### 多代理架构设计

```
┌─────────────────┐    ┌─────────────────┐
│   Agent White   │◄──►│   Agent Black   │
│   (白棋代理)     │    │   (黑棋代理)     │
└─────────┬───────┘    └─────────┬───────┘
          │                      │
          └──────┬─────────────────┘
                 ▼
        ┌─────────────────┐
        │   Game Master   │
        │   (游戏管理员)   │
        └─────────────────┘
```

### 工作流程
1. **初始化**: 创建白棋、黑棋代理和游戏管理员
2. **对战开始**: 白棋代理先行，发起对话
3. **移动循环**: 代理轮流分析棋局并执行移动
4. **游戏管理**: Game Master 验证移动并更新棋盘
5. **结果判定**: 自动检测游戏结束条件

## 快速开始

### 环境要求
- Python 3.10+
- uv 或 pip 包管理器

### 安装依赖

```bash
# 进入项目目录
cd ai_chess_agent

# 使用 uv 安装依赖（推荐）
uv pip install -r requirements.txt

# 或使用传统 pip
pip install -r requirements.txt
```

### API 密钥配置

您需要获取阿里云通义千问的 API 密钥：

1. 访问 [阿里云百炼平台](https://bailian.console.aliyun.com/)
2. 创建应用并获取 API Key
3. 在应用中输入 API Key

### 运行应用

```bash
streamlit run ai_chess_agent.py
```

### 使用步骤

1. **配置 API 密钥**: 在侧边栏输入您的 Qwen API 密钥
2. **设置回合数**: 选择对局的最大回合数（建议5-10回合用于演示）
3. **开始对局**: 点击 "Start Game" 按钮启动AI对战
4. **观看对局**: 实时观察两个AI代理的对战过程
5. **查看历史**: 浏览完整的移动历史和棋盘变化

## 应用场景

### 🎓 教育学习
- 观察AI的象棋策略思维过程
- 学习不同的开局和中局战术
- 理解多代理系统的协作机制

### 🔬 研究开发
- 多代理对话系统的实践案例
- 大语言模型在策略游戏中的应用
- 复杂决策过程的AI建模

### 🎮 娱乐体验
- 观看高水平的AI象棋对战
- 分析AI的移动逻辑和策略选择
- 体验自主AI代理的智能表现

### 💼 商业应用
- 展示AI决策能力的商业演示
- 多代理协作系统的原型验证
- 智能博弈系统的技术展示

## 项目特色

### 🚀 完全自主
- 两个AI代理完全自主进行对战
- 无需人工干预的全自动游戏流程
- 展示AI代理的独立思考能力

### 🎯 专业级象棋
- 严格遵循国际象棋规则
- 完整的移动验证和游戏状态检测
- 支持所有象棋特殊规则（将军、平局等）

### 🔧 高度可配置
- 可自定义对局回合数
- 支持不同的AI模型配置
- 灵活的代理行为参数调整

### 💡 教育价值
- 直观展示多代理系统工作原理
- 理解AI在复杂决策中的应用
- 学习象棋策略和AI思维过程

## 技术亮点

### 多代理协作
- **嵌套对话**: Agent White 和 Agent Black 通过 Game Master 进行嵌套对话
- **功能注册**: 每个代理都注册了移动执行和查询功能
- **自动轮换**: 系统自动管理代理之间的轮换机制

### 象棋引擎集成
- **合法移动验证**: 使用 python-chess 库确保所有移动合法
- **游戏状态检测**: 自动检测将军、将死、平局等游戏状态
- **移动历史追踪**: 完整记录每一步移动的详细信息

### 可视化展示
- **实时棋盘渲染**: 使用 SVG 格式实时显示棋盘状态
- **移动高亮显示**: 标出最新移动的起始和结束位置
- **历史回放功能**: 可查看完整的对局历史记录

## 依赖项

```txt
streamlit        # Web应用框架
chess==1.11.1    # 国际象棋引擎
autogen==0.6.1   # 多代理对话框架
cairosvg         # SVG渲染支持
pillow           # 图像处理库
```

## 配置说明

### 回合数设置
- **演示模式**: 5-10 回合，快速展示系统功能
- **完整对局**: 50-200 回合，体验完整的象棋对战
- **性能考虑**: 回合数越多，API 调用成本越高

### API 使用优化
- 建议在演示环境中使用较少回合数
- 可通过调整模型参数优化响应速度
- 注意监控 API 使用量避免过度消耗

## 许可证

MIT License

## 贡献指南

欢迎提交 Issue 和 Pull Request 来改进这个项目！

### 开发建议
- 遵循项目的代码风格规范
- 添加适当的测试用例
- 优化AI代理的象棋策略
- 改进用户界面和交互体验

### 扩展方向
- 支持更多象棋引擎和难度级别
- 添加人机对战模式
- 集成更多AI模型进行比较
- 增加对局分析和策略解说功能

---

**见证AI代理间的智慧博弈，体验多代理系统的无限可能！** ♟️🤖 